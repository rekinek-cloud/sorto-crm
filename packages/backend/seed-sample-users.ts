/**\n * Sample Users Data Seeder\n * Tworzy przykÅ‚adowych uÅ¼ytkownikÃ³w z rolami i hierarchiÄ… organizacyjnÄ…\n */\n\nimport { PrismaClient, UserRole, UserRelationType } from '@prisma/client';\nimport bcrypt from 'bcrypt';\n\nconst prisma = new PrismaClient();\n\n// PrzykÅ‚adowe dane uÅ¼ytkownikÃ³w\nconst sampleUsers = [\n  // ORGANIZACJA 1: Tech Solutions Sp. z o.o.\n  {\n    id: \"user_owner_001\",\n    email: \"michal.kowalski@techsolutions.pl\",\n    name: \"MichaÅ‚ Kowalski\",\n    role: UserRole.OWNER,\n    password: \"TechSolutions2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400\",\n    bio: \"ZaÅ‚oÅ¼yciel i CEO Tech Solutions. 15 lat doÅ›wiadczenia w branÅ¼y IT.\",\n    department: \"Executive\",\n    organizationName: \"Tech Solutions Sp. z o.o.\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: false, push: true }\n    }\n  },\n  \n  {\n    id: \"user_admin_001\",\n    email: \"anna.nowak@techsolutions.pl\",\n    name: \"Anna Nowak\",\n    role: UserRole.ADMIN,\n    password: \"AdminTech2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1494790108755-2616b6cf03e6?w=400\",\n    bio: \"HR Director i Administrator systemu. ZarzÄ…dza zespoÅ‚em i procesami.\",\n    department: \"Human Resources\",\n    organizationName: \"Tech Solutions Sp. z o.o.\",\n    managerId: \"user_owner_001\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: true, push: true }\n    }\n  },\n  \n  {\n    id: \"user_manager_001\",\n    email: \"piotr.wisniewski@techsolutions.pl\",\n    name: \"Piotr WiÅ›niewski\",\n    role: UserRole.MANAGER,\n    password: \"DevManager2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400\",\n    bio: \"Team Lead projektÃ³w sviluppowych. Specjalista od Agile i Scrum.\",\n    department: \"Development\",\n    organizationName: \"Tech Solutions Sp. z o.o.\",\n    managerId: \"user_admin_001\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: false, push: true }\n    }\n  },\n  \n  {\n    id: \"user_member_001\",\n    email: \"katarzyna.wojcik@techsolutions.pl\",\n    name: \"Katarzyna WÃ³jcik\",\n    role: UserRole.MEMBER,\n    password: \"FullStack2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400\",\n    bio: \"Senior Developer Full-Stack. Specjalizuje siÄ™ w React i Node.js.\",\n    department: \"Development\",\n    organizationName: \"Tech Solutions Sp. z o.o.\",\n    managerId: \"user_manager_001\",\n    skills: [\"React\", \"TypeScript\", \"Node.js\", \"PostgreSQL\"],\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: false, push: false }\n    }\n  },\n  \n  {\n    id: \"user_member_002\",\n    email: \"tomasz.krawczyk@techsolutions.pl\",\n    name: \"Tomasz Krawczyk\",\n    role: UserRole.MEMBER,\n    password: \"Designer2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400\",\n    bio: \"UX/UI Designer i Frontend Developer. Tworzy intuicyjne interfejsy.\",\n    department: \"Design\",\n    organizationName: \"Tech Solutions Sp. z o.o.\",\n    managerId: \"user_manager_001\",\n    skills: [\"Figma\", \"Adobe XD\", \"CSS\", \"JavaScript\", \"Vue.js\"],\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: false, push: true }\n    }\n  },\n  \n  {\n    id: \"user_guest_001\",\n    email: \"consultant@external.com\",\n    name: \"Jan Konsultant\",\n    role: UserRole.GUEST,\n    password: \"Consultant2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400\",\n    bio: \"ZewnÄ™trzny konsultant biznesowy. DostÄ™p tylko do odczytu projektÃ³w.\",\n    department: \"External\",\n    organizationName: \"Tech Solutions Sp. z o.o.\",\n    isExternal: true,\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: false, sms: false, push: false }\n    }\n  },\n\n  // ORGANIZACJA 2: Digital Marketing Group\n  {\n    id: \"user_owner_002\",\n    email: \"ceo@digitalmarketing.pl\",\n    name: \"Aleksandra Kowalczyk\",\n    role: UserRole.OWNER,\n    password: \"CEO_Marketing2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=400\",\n    bio: \"CEO Digital Marketing Group. Ekspert w digital transformation.\",\n    department: \"Executive\",\n    organizationName: \"Digital Marketing Group\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: true, push: true }\n    }\n  },\n  \n  {\n    id: \"user_admin_002\",\n    email: \"admin@digitalmarketing.pl\",\n    name: \"Marek Nowak\",\n    role: UserRole.ADMIN,\n    password: \"AdminMarketing2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?w=400\",\n    bio: \"COO i Administrator systemu. ZarzÄ…dza operacjami i zespoÅ‚em.\",\n    department: \"Operations\",\n    organizationName: \"Digital Marketing Group\",\n    managerId: \"user_owner_002\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: false, push: true }\n    }\n  },\n  \n  {\n    id: \"user_manager_002\",\n    email: \"marketing.lead@digitalmarketing.pl\",\n    name: \"Joanna WÃ³jcik\",\n    role: UserRole.MANAGER,\n    password: \"MarketingLead2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400\",\n    bio: \"Marketing Director. Lider zespoÅ‚u marketingu digitalnego.\",\n    department: \"Marketing\",\n    organizationName: \"Digital Marketing Group\",\n    managerId: \"user_admin_002\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: true, push: false }\n    }\n  },\n  \n  {\n    id: \"user_member_003\",\n    email: \"specialist@digitalmarketing.pl\",\n    name: \"Åukasz ZieliÅ„ski\",\n    role: UserRole.MEMBER,\n    password: \"SEO_Specialist2024!\",\n    isActive: true,\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400\",\n    bio: \"Digital Marketing Specialist. SEO, SEM, Social Media.\",\n    department: \"Marketing\",\n    organizationName: \"Digital Marketing Group\",\n    managerId: \"user_manager_002\",\n    skills: [\"SEO\", \"SEM\", \"Google Analytics\", \"Social Media\", \"Content Marketing\"],\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: true, sms: false, push: true }\n    }\n  },\n  \n  {\n    id: \"user_member_004\",\n    email: \"designer@digitalmarketing.pl\",\n    name: \"Monika Kaczmarek\",\n    role: UserRole.MEMBER,\n    password: \"GraphicDesign2024!\",\n    isActive: false, // PrzykÅ‚ad nieaktywnego uÅ¼ytkownika\n    emailVerified: true,\n    avatar: \"https://images.unsplash.com/photo-1494790108755-2616b6cf03e6?w=400\",\n    bio: \"Graphic Designer. Tworzy materiaÅ‚y wizualne do kampanii.\",\n    department: \"Creative\",\n    organizationName: \"Digital Marketing Group\",\n    managerId: \"user_manager_002\",\n    skills: [\"Photoshop\", \"Illustrator\", \"InDesign\", \"Figma\", \"Brand Design\"],\n    deactivatedReason: \"Employee left company\",\n    preferences: {\n      language: \"pl\",\n      timezone: \"Europe/Warsaw\",\n      notifications: { email: false, sms: false, push: false }\n    }\n  }\n];\n\n// Relacje hierarchiczne\nconst userRelations = [\n  // Tech Solutions Hierarchy\n  {\n    managerId: \"user_owner_001\",\n    employeeId: \"user_admin_001\",\n    relationType: UserRelationType.MANAGES\n  },\n  {\n    managerId: \"user_admin_001\",\n    employeeId: \"user_manager_001\", \n    relationType: UserRelationType.MANAGES\n  },\n  {\n    managerId: \"user_manager_001\",\n    employeeId: \"user_member_001\",\n    relationType: UserRelationType.LEADS\n  },\n  {\n    managerId: \"user_manager_001\",\n    employeeId: \"user_member_002\",\n    relationType: UserRelationType.LEADS\n  },\n  \n  // Cross-functional mentoring\n  {\n    managerId: \"user_member_001\",\n    employeeId: \"user_member_002\",\n    relationType: UserRelationType.MENTORS\n  },\n  \n  // Digital Marketing Group Hierarchy\n  {\n    managerId: \"user_owner_002\",\n    employeeId: \"user_admin_002\",\n    relationType: UserRelationType.MANAGES\n  },\n  {\n    managerId: \"user_admin_002\",\n    employeeId: \"user_manager_002\",\n    relationType: UserRelationType.MANAGES\n  },\n  {\n    managerId: \"user_manager_002\",\n    employeeId: \"user_member_003\",\n    relationType: UserRelationType.SUPERVISES\n  },\n  {\n    managerId: \"user_manager_002\",\n    employeeId: \"user_member_004\",\n    relationType: UserRelationType.SUPERVISES\n  }\n];\n\n// Dodatkowe uprawnienia\nconst userPermissions = [\n  {\n    userId: \"user_member_001\",\n    permission: \"projects.admin\",\n    resource: \"projects\",\n    scope: \"department\",\n    grantedBy: \"user_manager_001\"\n  },\n  {\n    userId: \"user_guest_001\",\n    permission: \"projects.read\",\n    resource: \"project_abc_123\",\n    scope: \"resource\",\n    grantedBy: \"user_admin_001\"\n  },\n  {\n    userId: \"user_member_002\",\n    permission: \"designs.admin\",\n    resource: \"design_assets\",\n    scope: \"organization\",\n    grantedBy: \"user_admin_001\"\n  }\n];\n\nasync function seedSampleUsers() {\n  console.log('ðŸŒ± Starting sample users seeding...');\n  \n  try {\n    // ZnajdÅº lub utwÃ³rz organizacje\n    const organizations = new Map();\n    \n    for (const user of sampleUsers) {\n      if (!organizations.has(user.organizationName)) {\n        let org = await prisma.organization.findFirst({\n          where: { name: user.organizationName }\n        });\n        \n        if (!org) {\n          org = await prisma.organization.create({\n            data: {\n              name: user.organizationName,\n              slug: user.organizationName.toLowerCase().replace(/[^a-z0-9]/g, '-'),\n              settings: {},\n              limits: {\n                users: 50,\n                streams: 100,\n                tasks: 1000,\n                projects: 50\n              }\n            }\n          });\n        }\n        \n        organizations.set(user.organizationName, org);\n      }\n    }\n    \n    console.log(`ðŸ“Š Found/created ${organizations.size} organizations`);\n    \n    // UtwÃ³rz uÅ¼ytkownikÃ³w\n    for (const userData of sampleUsers) {\n      const org = organizations.get(userData.organizationName);\n      \n      // SprawdÅº czy uÅ¼ytkownik juÅ¼ istnieje\n      const existingUser = await prisma.user.findUnique({\n        where: { email: userData.email }\n      });\n      \n      if (existingUser) {\n        console.log(`â­ï¸  User ${userData.email} already exists, skipping...`);\n        continue;\n      }\n      \n      // Hash hasÅ‚a\n      const hashedPassword = await bcrypt.hash(userData.password, 12);\n      \n      // Przygotuj dane uÅ¼ytkownika\n      const { \n        password, \n        organizationName, \n        managerId, \n        skills, \n        deactivatedReason,\n        isExternal,\n        preferences,\n        ...userCreateData \n      } = userData;\n      \n      const user = await prisma.user.create({\n        data: {\n          ...userCreateData,\n          password: hashedPassword,\n          organizationId: org.id,\n          metadata: {\n            skills: skills || [],\n            isExternal: isExternal || false,\n            deactivatedReason: deactivatedReason || null,\n            preferences: preferences || {}\n          },\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }\n      });\n      \n      console.log(`âœ… Created user: ${user.name} (${user.email}) - ${user.role}`);\n    }\n    \n    console.log('ðŸ‘¥ Users created successfully');\n    \n    // UtwÃ³rz relacje hierarchiczne\n    console.log('ðŸ”— Creating user relations...');\n    \n    for (const relation of userRelations) {\n      // SprawdÅº czy relacja juÅ¼ istnieje\n      const existingRelation = await prisma.userRelation.findFirst({\n        where: {\n          managerId: relation.managerId,\n          employeeId: relation.employeeId,\n          relationType: relation.relationType\n        }\n      });\n      \n      if (existingRelation) {\n        console.log(`â­ï¸  Relation ${relation.managerId} -> ${relation.employeeId} already exists`);\n        continue;\n      }\n      \n      await prisma.userRelation.create({\n        data: {\n          managerId: relation.managerId,\n          employeeId: relation.employeeId,\n          relationType: relation.relationType,\n          isActive: true,\n          establishedAt: new Date()\n        }\n      });\n      \n      console.log(`ðŸ”— Created relation: ${relation.managerId} ${relation.relationType} ${relation.employeeId}`);\n    }\n    \n    // UtwÃ³rz dodatkowe uprawnienia\n    console.log('ðŸ” Creating user permissions...');\n    \n    for (const permission of userPermissions) {\n      // SprawdÅº czy uprawnienie juÅ¼ istnieje\n      const existingPermission = await prisma.userPermission.findFirst({\n        where: {\n          userId: permission.userId,\n          permission: permission.permission,\n          resource: permission.resource\n        }\n      });\n      \n      if (existingPermission) {\n        console.log(`â­ï¸  Permission ${permission.permission} for ${permission.userId} already exists`);\n        continue;\n      }\n      \n      await prisma.userPermission.create({\n        data: {\n          userId: permission.userId,\n          permission: permission.permission,\n          resource: permission.resource,\n          scope: permission.scope,\n          grantedBy: permission.grantedBy,\n          grantedAt: new Date(),\n          isActive: true\n        }\n      });\n      \n      console.log(`ðŸ” Created permission: ${permission.permission} for user ${permission.userId}`);\n    }\n    \n    // Podsumowanie\n    const totalUsers = await prisma.user.count();\n    const totalRelations = await prisma.userRelation.count();\n    const totalPermissions = await prisma.userPermission.count();\n    \n    console.log('\\nðŸ“Š SEEDING SUMMARY:');\n    console.log(`ðŸ‘¥ Total users: ${totalUsers}`);\n    console.log(`ðŸ”— Total relations: ${totalRelations}`);\n    console.log(`ðŸ” Total permissions: ${totalPermissions}`);\n    console.log(`ðŸ¢ Organizations: ${organizations.size}`);\n    \n    // Statystyki wedÅ‚ug rÃ³l\n    const roleStats = await prisma.user.groupBy({\n      by: ['role'],\n      _count: { role: true }\n    });\n    \n    console.log('\\nðŸ“ˆ USERS BY ROLE:');\n    roleStats.forEach(stat => {\n      console.log(`${stat.role}: ${stat._count.role}`);\n    });\n    \n    console.log('\\nðŸŽ‰ Sample users seeding completed successfully!');\n    \n  } catch (error) {\n    console.error('âŒ Error seeding sample users:', error);\n    throw error;\n  }\n}\n\nif (require.main === module) {\n  seedSampleUsers()\n    .catch(console.error)\n    .finally(() => prisma.$disconnect());\n}\n\nexport default seedSampleUsers;\n"